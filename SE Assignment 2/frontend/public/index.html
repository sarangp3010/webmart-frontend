<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
  <title>Assignment</title>
  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    crossorigin="anonymous">
  <script>
    function abc() {
      document.getElementById("p1").innerHTML = document.getElementById("abd").value;
      document.getElementById("p2").innerHTML = document.getElementById("details").value;
    }
  </script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>  
    <script>
      $(document).ready(function() {
        // Hide create inventory modal on click of Add Inventory button
        document.getElementById("update-inventory").addEventListener("click", function() {
          $('#MyModal').modal('show');
        });
    
        // Show create inventory modal on click of Add New Inventory button
        document.getElementById('show-inventory-add-modal-btn').addEventListener("click", function(event) {
          $('#createInventoryModal').modal('show');
        });
    
        // Add inventory data on click of Save button in create inventory modal
        document.getElementById('add-inventory-btn').addEventListener("click", function() {
          var name = document.getElementById("inventory-name").value;
          var quantity = document.getElementById("inventory-quantity").value;
          var image = document.getElementById("inventory-image").value;
          
          if(name == null) {
            name = "admin";
          }
          if(quantity == null) {
            name = 1;
          }
          if(image == null) {
            image = "https://..";
          }

          // Make POST request to add inventory data
          axios.post('http://localhost:5001/api/data', {
              name: name,
              quantity: quantity,
              image_url: image
            })
            .then(function(response) {
              console.log(response);
              // Display success message
              alert('Inventory added successfully!');
              // Reset form values
              document.getElementById("inventory-name").value = '';
              document.getElementById("inventory-quantity").value = '';
              document.getElementById("inventory-image").value = '';
              // Hide create inventory modal
              $('#createInventoryModal').modal('hide');
            })
            .catch(function(error) {
              console.log(error);
              // Display error message
              alert('Failed to add inventory!');
            });
            $('#createInventoryModal').modal('hide');
        });
    
        // RapidAPI Call to fetch data and display in a table
        $('#btn-pi-fetch-table').click(function() {
          console.log("cdcd", "dfd");
          $.ajax({
            url: "https://api.thecatapi.com/v1/images/search?limit=5",
            type: "GET",
            headers: {
              "x-api-key": "4c391941b8msh63952f885f2594ep16b019jsn1d7447ebdd36"
            },
            dataType: "json",
            success: function(data) {
              var html = "<table class='table'><thead><tr><th>Name</th><th>Quantity</th><th>Image</th></tr></thead><tbody>";
              for (var i = 0; i < data.length; i++) {
                html += "<tr><td>Cat #" + i + "</td><td>" + Math.floor(Math.random() * 10) + "</td><td><img src='" + data[i].url + "' width='100' /></td></tr>";
              }
              html += "</tbody></table>";
              $('#table').html(html);
            },
            error: function(jqXHR, textStatus, errorThrown) {
              console.log(textStatus, errorThrown);
            }
          });
        });
      });
    </script>
    

</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <nav class="navbar navbar-expand-sm bg-light navbar-light" style="margin-bottom: 20px;">
    <img src="logo.png" alt="my_logo" style="width:100px; padding-left: 20px; overflow: hidden;">
    <p class="nav-link" style="font-size: 40px; margin-left: 30px; margin-top: 20px; margin-right: 250px">Alpha Company
    </p>
    <button id="btn-pi-fetch-table" type="button" class="btn btn-outline-primary me-2" onclick="">3rd Party API</button>
    <button id="show-inventory-add-modal-btn" type="button" class="btn btn-outline-primary me-2" data-toggle="modal"
      data-target="#createInventoryModal">Create Inventory</button>
    <button id = "update-inventory" type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#myModal">Update Inventory</button>
    <!-- <button id="show-inventory-items" type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#myModal">
      Open Modal
    </button> -->
  </nav>

  <div class="container">
    <div class="row">
      <div class="col-md-3">
        <img src="mypic.jpeg" alt="not found" class="card-img-top rounded">
      </div>
      <div class="col-md-8">
        <form name="details">
          <div class="form-group mb-3">
            <label for="abd" class="form-label">
              <h1>Name:</h1>
            </label>
            <input type="text" name="name" value="Abhiroop Reddy Barla" id="abd" class="form-control">
          </div>
          <div class="form-group mb-3">
            <label for="details" class="form-label">
              <h1>Description:</h1>
            </label>
            <textarea class="form-control" rows="5" id="details"
              name="details">I am Abhiroop Reddy Barla MS in Computer Science student at SUNY Albany. I have taken the course Software Engineering for the Spring 2023 semester. I hope that I can have a good experience doing this course. I am looking forward to complete the group project and gain a lot of experience on web concepts and getting good exposure working in group setting. Hoping to have a great experience.</textarea>
          </div>
          <button type="button" onclick="abc();" class="btn btn-primary mt-xl-4">Submit</button>
        </form>
        <div class="card bg-light mt-3">
          <div class="card-body">
            <p id="p1"></p>
            <p id="p2"></p>
          </div>
          <div id="root"></div>
        </div>
      </div>
    </div>
  </div>
  <div id="table">
    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Quantity</th>
          <th>Image</th>
        </tr>
      </thead>
      <tbody id="table-body">
      </tbody>
    </table>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="createInventoryModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Add Inventory</h5>
          <button id = "btn-close" type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form id="myForm">
            <div class="form-group">
              <label for="image">Image:</label>
              <input type="file" class="form-control-file" id="inventory-image">
            </div>
            <div class="form-group">
              <label for="name">Name:</label>
              <input type="text" class="form-control" id="inventory-name">
            </div>
            <div class="form-group">
              <label for="quantity">Quantity:</label>
              <input type="number" class="form-control" id="inventory-quantity">
            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" id="add-inventory-btn" data-dismiss="modal">Add
                Inventory</button>
              <input type="submit" class="btn btn-primary" data-dismiss="modal" value="Submit"/>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- ----Inventory Modal---------- -->

  <div class="modal" id="myModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">My Modal</h5>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <table class="table">
            <thead>
              <tr>
                <th>No.</th>
                <th>Image</th>
                <th>Name</th>
                <th>Quantity</th>
                <th>Other</th>
              </tr>
            </thead>
            <tbody>
              <!-- <tr>
                <td>1</td>
                <td><img src="https://via.placeholder.com/50x50" alt="Product Image"></td>
                <td>
                  <input type="text" name="update_name" value="Abhiroop Reddy Barla" id="abd" class="form-control">
                </td>
                <td>
                  <input type="digit" name="update_quantity" value="10" id="abd" class="form-control">
                </td>
                <td>
                  <button id="btn-update-inventory-items" type="button" class="btn btn-secondary">Update</button>
                </td>
              </tr>
              <tr>
                <td>2</td>
                <td><img src="https://via.placeholder.com/50x50" alt="Product Image"></td>
                <td>
                  <input type="text" name="update_name" value="Babara" id="abd" class="form-control">
                </td>
                <td>
                  <input type="digit" name="update_quantity" value="20" id="bcd" class="form-control">
                </td>
                <td>
                  <button id="btn-update-inventory-items" type="button" class="btn btn-secondary">Update</button>
                </td>
              </tr> -->
              <div id="inventory-container"></div>
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button id="btn-close-inventory-items" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</body>

<script src = "buttonEvent.js"></script>
<script src="script.js"></script>
</html>